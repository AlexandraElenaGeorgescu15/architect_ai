<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architect.AI - Technical Documentation</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: #f5f7fa;
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 40px;
            border-bottom: 4px solid #2980b9;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .version {
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 15px;
            display: inline-block;
            margin-top: 15px;
            font-size: 0.9em;
        }

        .section {
            padding: 40px;
            border-bottom: 1px solid #e9ecef;
        }

        .section h2 {
            font-size: 2em;
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
        }

        .section h3 {
            font-size: 1.5em;
            color: #34495e;
            margin: 25px 0 15px 0;
        }

        .section h4 {
            font-size: 1.2em;
            color: #555;
            margin: 20px 0 10px 0;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .feature-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid #3498db;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.2);
            transform: translateY(-2px);
        }

        .feature-card h3 {
            color: #2c3e50;
            margin-top: 0;
            font-size: 1.3em;
        }

        .feature-card ul {
            list-style: none;
            margin-top: 15px;
        }

        .feature-card li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .feature-card li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: #3498db;
            font-weight: bold;
            font-size: 1.5em;
        }

        .info-box {
            background: #e8f4f8;
            border-left: 4px solid #3498db;
            padding: 20px;
            margin: 25px 0;
            border-radius: 5px;
        }

        .info-box.warning {
            background: #fff3cd;
            border-left-color: #ffc107;
        }

        .info-box.note {
            background: #d1ecf1;
            border-left-color: #17a2b8;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .workflow-diagram {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 25px;
            margin: 25px 0;
        }

        .workflow-step {
            display: flex;
            align-items: flex-start;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .step-number {
            min-width: 40px;
            height: 40px;
            background: #3498db;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .step-content h4 {
            margin: 0 0 8px 0;
            color: #2c3e50;
        }

        .step-content p {
            margin: 0;
            color: #666;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        table th {
            background: #34495e;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
        }

        table tr:hover {
            background: #f8f9fa;
        }

        .tab-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .tab-item {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            color: #2c3e50;
        }

        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 30px;
        }

        footer p {
            margin: 8px 0;
        }

        @media (max-width: 768px) {
            header h1 { font-size: 2em; }
            .feature-grid { grid-template-columns: 1fr; }
            .section { padding: 25px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Architect.AI</h1>
            <p>AI-Powered Architecture Assistant for Software Development</p>
            <div class="version">Version 2.1.0 | Last Updated: November 2025</div>
        </header>

        <!-- Overview -->
        <div class="section">
            <h2>Overview</h2>
            <p>Architect.AI is a Streamlit-based application that transforms meeting notes and repository context into production-ready software artifacts. It uses a combination of local and cloud AI models, RAG (Retrieval-Augmented Generation), and static code analysis to generate architecture diagrams, code, documentation, and project management artifacts.</p>
            
            <div class="info-box">
                <strong>Core Principles:</strong>
                <ul style="margin: 10px 0 0 20px;">
                    <li><strong>RAG-First:</strong> Always retrieves repository context before generating</li>
                    <li><strong>Feature-Focused:</strong> Outputs relate to the feature in meeting notes</li>
                    <li><strong>Stack-Aware:</strong> Detects and respects your tech stack and conventions</li>
                    <li><strong>Context-Driven:</strong> Uses your repository's architecture, patterns, and naming conventions</li>
                </ul>
            </div>
        </div>

        <!-- Application Modes -->
        <div class="section">
            <h2>Application Modes</h2>
            <p>The application operates in two distinct modes, each tailored for different use cases:</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <h3>üë®‚Äçüíª Developer Mode</h3>
                    <p>Full technical capabilities for development teams</p>
                    <ul>
                        <li>All 8 artifact types available</li>
                        <li>Granular generation (individual or batch)</li>
                        <li>Interactive editors for refinement</li>
                        <li>Code editor with syntax highlighting</li>
                        <li>Test generation capabilities</li>
                        <li>Knowledge Graph visualization</li>
                        <li>Pattern Mining analysis</li>
                        <li>Version history tracking</li>
                        <li>Fine-tuning controls</li>
                        <li>Export management</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h3>üìã PM Mode</h3>
                    <p>Streamlined interface for product managers</p>
                    <ul>
                        <li>Visual prototype generation</li>
                        <li>JIRA task creation</li>
                        <li>Interactive prototype editor</li>
                        <li>Simplified input interface</li>
                        <li>Quick modifications via chat</li>
                        <li>Version history</li>
                        <li>Export capabilities</li>
                        <li>No technical setup required</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Artifact Types -->
        <div class="section">
            <h2>Artifact Types</h2>
            <p>The system can generate 8 different types of artifacts from meeting notes:</p>

            <table>
                <thead>
                    <tr>
                        <th>Artifact Type</th>
                        <th>Output Format</th>
                        <th>Description</th>
                        <th>Validator</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>ERD Diagram</strong></td>
                        <td>Mermaid + HTML</td>
                        <td>Entity-Relationship Diagram showing data models, entities, relationships, and attributes</td>
                        <td>Mermaid syntax, entities ‚â•1, relationships ‚â•1</td>
                    </tr>
                    <tr>
                        <td><strong>Architecture Diagram</strong></td>
                        <td>Mermaid + HTML</td>
                        <td>System architecture showing components, layers, services, and interactions</td>
                        <td>Components ‚â•3, layers ‚â•2, interactions ‚â•2</td>
                    </tr>
                    <tr>
                        <td><strong>API Documentation</strong></td>
                        <td>Markdown</td>
                        <td>REST API documentation with endpoints, methods, request/response formats, authentication</td>
                        <td>Endpoints ‚â•1, HTTP methods, request/response examples</td>
                    </tr>
                    <tr>
                        <td><strong>Code Prototype</strong></td>
                        <td>Multi-file</td>
                        <td>Full-stack code: Frontend (TypeScript/Angular) + Backend (C#/.NET)</td>
                        <td>File markers, no placeholders, syntax validation</td>
                    </tr>
                    <tr>
                        <td><strong>Visual Prototype</strong></td>
                        <td>HTML/CSS/JS</td>
                        <td>Interactive HTML prototype with styling and basic functionality</td>
                        <td>HTML structure, required tags, valid markup</td>
                    </tr>
                    <tr>
                        <td><strong>JIRA Tasks</strong></td>
                        <td>Markdown</td>
                        <td>User stories with acceptance criteria (Given/When/Then), estimates, and subtasks</td>
                        <td>Story format, acceptance criteria, estimates</td>
                    </tr>
                    <tr>
                        <td><strong>Workflows</strong></td>
                        <td>Markdown</td>
                        <td>Deployment workflows, CI/CD pipelines, operational procedures</td>
                        <td>Steps ‚â•3, sequencing, completeness</td>
                    </tr>
                    <tr>
                        <td><strong>All Diagrams</strong></td>
                        <td>Multiple files</td>
                        <td>Batch generation of ERD, Architecture, Data Flow, User Flow, Components, API Sequence</td>
                        <td>Multiple diagram types validated</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Developer Mode Tabs -->
        <div class="section">
            <h2>Developer Mode Interface</h2>
            <p>Developer Mode provides 12 tabs, each serving a specific purpose:</p>

            <div class="tab-list">
                <div class="tab-item">üìù Input</div>
                <div class="tab-item">üéØ Generate</div>
                <div class="tab-item">üìä Outputs</div>
                <div class="tab-item">üé® Interactive Editor</div>
                <div class="tab-item">‚úèÔ∏è Code Editor</div>
                <div class="tab-item">üéì Fine-Tuning</div>
                <div class="tab-item">üß™ Tests</div>
                <div class="tab-item">üì§ Export</div>
                <div class="tab-item">üìö Versions</div>
                <div class="tab-item">üìà Metrics</div>
                <div class="tab-item">üîó Knowledge Graph</div>
                <div class="tab-item">üîç Pattern Mining</div>
            </div>

            <h3>Tab Descriptions</h3>

            <div class="feature-card">
                <h4>üìù Input Tab</h4>
                <p>Upload or paste meeting notes/requirements. Supports Markdown and plain text. Minimum 80 characters required for generation.</p>
            </div>

            <div class="feature-card">
                <h4>üéØ Generate Tab</h4>
                <p>Granular artifact generation interface. Select individual artifacts or batch operations. Configure model providers and parameters. View generation logs and quality scores.</p>
            </div>

            <div class="feature-card">
                <h4>üìä Outputs Tab</h4>
                <p>View all generated artifacts with syntax highlighting, live previews for diagrams/HTML, download capabilities, and validation results.</p>
            </div>

            <div class="feature-card">
                <h4>üé® Interactive Editor Tab</h4>
                <p>Chat-based prototype modification interface. Send natural language instructions to modify visual prototypes. Quick action buttons for common changes (responsive, dark mode, polish). Version tracking with restore capability.</p>
            </div>

            <div class="feature-card">
                <h4>‚úèÔ∏è Code Editor Tab</h4>
                <p>In-app code editor with syntax highlighting. Edit generated code files. Save/revert capabilities. Multi-file editor for code prototypes.</p>
            </div>

            <div class="feature-card">
                <h4>üéì Fine-Tuning Tab</h4>
                <p>Local model fine-tuning interface. Configure training parameters (epochs, batch size, learning rate). Monitor training progress. View dataset statistics. Both Ollama and HuggingFace pipelines available.</p>
            </div>

            <div class="feature-card">
                <h4>üß™ Tests Tab</h4>
                <p>AI-powered test generation for code artifacts. Creates unit tests based on code structure. Supports multiple testing frameworks.</p>
            </div>

            <div class="feature-card">
                <h4>üì§ Export Tab</h4>
                <p>Export manager for bulk downloads. Create ZIP archives of artifacts. Batch download capabilities. Export configurations.</p>
            </div>

            <div class="feature-card">
                <h4>üìö Versions Tab</h4>
                <p>Version history for all artifacts. Restore previous versions. Compare changes between versions. Automatic versioning on each generation.</p>
            </div>

            <div class="feature-card">
                <h4>üìà Metrics Tab</h4>
                <p>Generation metrics dashboard. Track quality scores, model usage, generation times, validation results. Performance analytics.</p>
            </div>

            <div class="feature-card">
                <h4>üîó Knowledge Graph Tab</h4>
                <p>Visualize component relationships from your codebase. AST parsing for Python, regex parsing for TypeScript/C#/Java. NetworkX graph visualization. Coupling metrics and dependency analysis.</p>
            </div>

            <div class="feature-card">
                <h4>üîç Pattern Mining Tab</h4>
                <p>Extract design patterns, anti-patterns, and code smells from your repository. Detect Singleton, Factory, Observer, Strategy patterns. Identify God Classes, Long Methods, duplicates. Quality scoring 0-100.</p>
            </div>
        </div>

        <!-- Generation System -->
        <div class="section">
            <h2>Generation System</h2>

            <h3>Smart Generation Architecture</h3>
            <p>The system uses a hybrid local-first approach with intelligent cloud fallback:</p>

            <div class="workflow-diagram">
                <div class="workflow-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>RAG Context Retrieval</h4>
                        <p>ChromaDB vector search + BM25 keyword matching retrieve 18-100 relevant code chunks from your repository. Hybrid reranking combines both methods for optimal results.</p>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Intelligence Analysis</h4>
                        <p>Knowledge Graph (AST parsing) and Pattern Mining analyze your codebase structure and patterns. Results cached for performance.</p>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Context Assembly</h4>
                        <p>5-Layer Context: (1) RAG chunks, (2) Meeting notes, (3) Repository analysis, (4) Knowledge Graph, (5) Pattern Mining results.</p>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Local Model Attempt</h4>
                        <p>Try artifact-specific local model via Ollama (if available). Model routing selects optimal model for artifact type.</p>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h4>Validation</h4>
                        <p>Artifact-specific validator checks quality (0-100 score). Minimum threshold: 80/100. Auto-retry if below threshold (max 2 retries).</p>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">6</div>
                    <div class="step-content">
                        <h4>Cloud Fallback</h4>
                        <p>If local quality < 80, fallback to cloud providers (Gemini 2.0 Flash for complex tasks, Groq/OpenAI for simple tasks).</p>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">7</div>
                    <div class="step-content">
                        <h4>Save & Learn</h4>
                        <p>If cloud response quality ‚â• 80, save for fine-tuning. Return validated artifact. Record metrics.</p>
                    </div>
                </div>
            </div>

            <h3>Model Routing</h3>
            <p>Artifact-specific model selection optimizes for each task type:</p>

            <table>
                <thead>
                    <tr>
                        <th>Artifact Type</th>
                        <th>Primary Local Model</th>
                        <th>Fallback Local</th>
                        <th>Cloud (Complex)</th>
                        <th>Cloud (Simple)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ERD/Architecture</td>
                        <td>mistral:7b-instruct-q4_K_M</td>
                        <td>llama3:8b-instruct-q4_K_M</td>
                        <td>Gemini 2.0 Flash</td>
                        <td>Groq/OpenAI</td>
                    </tr>
                    <tr>
                        <td>Code Prototype</td>
                        <td>codellama:7b-instruct-q4_K_M</td>
                        <td>qwen2.5-coder:7b-instruct-q4_K_M</td>
                        <td>Gemini 2.0 Flash</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>Visual Prototype</td>
                        <td>qwen2.5-coder:7b-instruct-q4_K_M</td>
                        <td>codellama:7b-instruct-q4_K_M</td>
                        <td>Gemini 2.0 Flash</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>API Docs</td>
                        <td>llama3:8b-instruct-q4_K_M</td>
                        <td>codellama:7b-instruct-q4_K_M</td>
                        <td>-</td>
                        <td>Groq/OpenAI</td>
                    </tr>
                    <tr>
                        <td>JIRA/Workflows</td>
                        <td>llama3:8b-instruct-q4_K_M</td>
                        <td>-</td>
                        <td>-</td>
                        <td>Groq/OpenAI</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Validation System -->
        <div class="section">
            <h2>Validation System</h2>
            <p>Each artifact type has a specialized validator that performs multiple quality checks:</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <h3>Validation Process</h3>
                    <ul>
                        <li><strong>Basic Check:</strong> Not empty, minimum content length</li>
                        <li><strong>Syntax Check:</strong> Valid format (Mermaid, HTML, code syntax)</li>
                        <li><strong>Semantic Check:</strong> Matches meeting notes requirements</li>
                        <li><strong>Completeness:</strong> Minimum entities/components present</li>
                        <li><strong>Context Alignment:</strong> Uses project-specific patterns</li>
                        <li><strong>Quality Scoring:</strong> 0-100 comprehensive score</li>
                        <li><strong>Length Validation:</strong> Adequate detail level</li>
                        <li><strong>Format Validation:</strong> Proper structure</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h3>Validation Results</h3>
                    <ul>
                        <li>Quality score: 0-100</li>
                        <li>Pass/fail determination</li>
                        <li>List of errors (critical issues)</li>
                        <li>List of warnings (minor issues)</li>
                        <li>Improvement suggestions</li>
                        <li>Validation report saved to outputs/validation/</li>
                        <li>Auto-retry if score < 80 (max 2 attempts)</li>
                    </ul>
                </div>
            </div>

            <div class="info-box">
                <strong>Quality Thresholds:</strong> Generation threshold: 80/100 | Fine-tuning save threshold: 80/100 | Minimum passing: 60/100 (with retries exhausted)
            </div>
        </div>

        <!-- RAG System -->
        <div class="section">
            <h2>RAG (Retrieval-Augmented Generation)</h2>
            
            <h3>Hybrid Retrieval</h3>
            <p>The RAG system combines two retrieval methods for optimal context:</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <h3>Vector Search (ChromaDB)</h3>
                    <ul>
                        <li>Semantic similarity search</li>
                        <li>Embedding-based retrieval</li>
                        <li>Finds conceptually related code</li>
                        <li>HNSW indexing for speed</li>
                        <li>Cosine similarity metric</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h3>BM25 Keyword Search</h3>
                    <ul>
                        <li>Exact term matching</li>
                        <li>TF-IDF based ranking</li>
                        <li>Finds specific keywords</li>
                        <li>Complements vector search</li>
                        <li>Fast query execution</li>
                    </ul>
                </div>
            </div>

            <h3>Context Assembly</h3>
            <p>Retrieved chunks are organized and optimized:</p>
            <ul style="margin-left: 20px;">
                <li><strong>Tiered Organization:</strong> High-relevance chunks prioritized</li>
                <li><strong>Model-Aware Limits:</strong> Adapts to model context windows (18-100 chunks)</li>
                <li><strong>Query Expansion:</strong> Original query + expanded variations (up to 3 total)</li>
                <li><strong>Reranking:</strong> Hybrid scores combine vector + BM25 results</li>
                <li><strong>Context Optimization:</strong> Fits within token budget (8000 tokens default)</li>
                <li><strong>Intelligent Caching:</strong> Cache RAG results per meeting notes hash (60-70% reduction in RAG calls)</li>
            </ul>

            <div class="code-block">
# RAG Configuration (rag/config.yaml)
hybrid:
  k_vector: 10      # Vector search results
  k_bm25: 10        # BM25 search results
  k_final: 18       # Final merged results (default)

# Enhanced RAG can retrieve up to 100 chunks for deep context
# Standard mode: 18 chunks
# Enhanced mode: 50-100 chunks (Developer Mode)</div>
        </div>

        <!-- Intelligence Systems -->
        <div class="section">
            <h2>Intelligence Systems</h2>

            <h3>Knowledge Graph</h3>
            <p>Static code analysis system that builds a dependency graph of your codebase:</p>

            <div class="feature-card">
                <h4>Component Extraction</h4>
                <ul>
                    <li><strong>Python:</strong> AST parsing (imports, classes, functions, decorators)</li>
                    <li><strong>TypeScript:</strong> Regex parsing (classes, interfaces, methods, imports)</li>
                    <li><strong>C#:</strong> Regex parsing (classes, interfaces, methods, namespaces)</li>
                    <li><strong>Java:</strong> Regex parsing (classes, interfaces, methods, packages)</li>
                </ul>

                <h4>Graph Construction</h4>
                <ul>
                    <li>NetworkX directed graph representation</li>
                    <li>Nodes: Components (classes, functions, modules)</li>
                    <li>Edges: Dependencies (imports, calls, inheritance)</li>
                    <li>Metrics: Coupling density, clustering coefficient, complexity</li>
                </ul>

                <h4>Performance</h4>
                <ul>
                    <li>Lazy-loaded on first use</li>
                    <li>Cached for 10x performance boost on subsequent runs</li>
                    <li>Incremental updates (only changed files)</li>
                </ul>
            </div>

            <h3>Pattern Mining</h3>
            <p>Detects design patterns, anti-patterns, and code smells in your codebase:</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4>Design Patterns</h4>
                    <ul>
                        <li>Singleton</li>
                        <li>Factory</li>
                        <li>Observer</li>
                        <li>Strategy</li>
                        <li>Decorator</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>Anti-Patterns</h4>
                    <ul>
                        <li>God Class (>1000 lines)</li>
                        <li>Long Method (>50 lines)</li>
                        <li>Duplicate Code</li>
                        <li>Feature Envy</li>
                        <li>Shotgun Surgery</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>Code Smells</h4>
                    <ul>
                        <li>Magic Numbers</li>
                        <li>Dead Code / TODOs</li>
                        <li>Complex Conditionals</li>
                        <li>Long Parameter Lists</li>
                        <li>Primitive Obsession</li>
                    </ul>
                </div>
            </div>

            <div class="info-box">
                <strong>Quality Scoring:</strong> Pattern Mining assigns a 0-100 quality score based on detected patterns (positive points) and anti-patterns/smells (negative points). Provides actionable improvement suggestions.
            </div>
        </div>

        <!-- Fine-Tuning -->
        <div class="section">
            <h2>Fine-Tuning System</h2>
            <p>Two complementary fine-tuning pipelines for model improvement:</p>

            <h3>1. Ollama Adaptive Learning</h3>

            <div class="feature-card">
                <h4>Automatic Feedback Collection</h4>
                <p>System records every interaction automatically:</p>
                <ul>
                    <li>Cloud responses with quality ‚â• 80/100 saved for training</li>
                    <li>Full context preserved (prompt, system message, meeting notes, RAG context)</li>
                    <li>Quality tiers: 90-100 (excellent), 85-89 (good), 80-84 (acceptable)</li>
                    <li>Examples below 80 not saved (maintains quality)</li>
                </ul>

                <h4>Automatic Training Trigger</h4>
                <p>When 50+ examples collected:</p>
                <ul>
                    <li>Automatically triggers fine-tuning in background thread</li>
                    <li>Non-blocking (artifact generation continues)</li>
                    <li>Cooldown period: 1 hour between training runs</li>
                    <li>Lock file prevents concurrent training</li>
                    <li>No manual intervention required</li>
                </ul>

                <h4>Training Process</h4>
                <ul>
                    <li>Prepares training data in JSONL format</li>
                    <li>Creates fine-tuned model with timestamp</li>
                    <li>Updates model registry for artifact routing</li>
                    <li>Ollama command generated for manual execution (if Ollama fine-tuning available)</li>
                </ul>
            </div>

            <div class="info-box warning">
                <strong>Current Status:</strong> Feedback collection and automatic triggering are fully functional. Actual Ollama fine-tuning execution requires Ollama's fine-tuning API (when available). Training data is saved and ready at finetune_datasets/cloud_responses/
            </div>

            <h3>2. HuggingFace Manual Training</h3>

            <div class="feature-card">
                <h4>Manual Training Interface</h4>
                <p>Full control over training process via Fine-Tuning tab:</p>
                <ul>
                    <li>Select model to fine-tune (CodeLlama, Mistral, etc.)</li>
                    <li>Configure hyperparameters (epochs, batch size, learning rate)</li>
                    <li>Choose LoRA/QLoRA for efficient 4-bit training</li>
                    <li>Monitor progress with live progress bar</li>
                    <li>Dataset generation from multiple sources</li>
                </ul>

                <h4>Dataset Sources</h4>
                <ul>
                    <li><strong>Comprehensive Builder:</strong> 1000+ high-quality examples from templates</li>
                    <li><strong>Ollama Generation:</strong> 600-1200 examples generated via local models</li>
                    <li><strong>Feedback Data:</strong> Production feedback from user interactions</li>
                    <li><strong>Repository Sweep:</strong> Extract patterns from your codebase</li>
                </ul>

                <h4>Training Configuration</h4>
                <ul>
                    <li>Epochs: 1-10 (default: 3)</li>
                    <li>Batch size: 1-8 (default: 4, limited by VRAM)</li>
                    <li>Learning rate: 1e-5 to 1e-3 (default: 2e-4)</li>
                    <li>LoRA rank: 8-64 (default: 16)</li>
                    <li>Checkpoint saving every epoch</li>
                </ul>
            </div>

            <h3>VRAM Management</h3>
            <p>Optimized for RTX 3500 Ada (12GB VRAM):</p>
            <ul style="margin-left: 20px;">
                <li><strong>Persistent Models:</strong> codellama:7b (3.8GB) + llama3:8b (4.7GB) = 8.5GB</li>
                <li><strong>On-Demand Models:</strong> Loaded as needed, unloaded after use</li>
                <li><strong>Fine-Tuning:</strong> 4-bit quantization (QLoRA) for efficient training</li>
                <li><strong>Batch Size:</strong> Limited to 1-4 based on available VRAM</li>
                <li><strong>Safety Buffer:</strong> 1-2GB reserved for system operations</li>
            </ul>
        </div>

        <!-- Interactive Features -->
        <div class="section">
            <h2>Interactive Features</h2>

            <h3>Interactive Prototype Editor</h3>
            <p>Chat-based modification system for visual prototypes:</p>
            <ul style="margin-left: 20px;">
                <li><strong>Natural Language Instructions:</strong> "Add a search bar to the header"</li>
                <li><strong>Quick Actions:</strong> Make Responsive, Add Dark Mode, Polish UI buttons</li>
                <li><strong>Version History:</strong> Track all modifications, restore previous versions</li>
                <li><strong>Live Preview:</strong> Real-time HTML rendering in iframe</li>
                <li><strong>Cache Busting:</strong> Ensures latest version always loads (no stale cache)</li>
                <li><strong>Available in:</strong> Both Developer Mode and PM Mode</li>
            </ul>

            <h3>Mermaid Diagram Editor</h3>
            <p>Two-column editor with syntax editing and live preview:</p>
            <ul style="margin-left: 20px;">
                <li><strong>Syntax Editor:</strong> Text area for Mermaid code editing</li>
                <li><strong>Live Preview:</strong> Canvas renders diagram in real-time</li>
                <li><strong>Error Handling:</strong> 4-layer error detection (validation, render, init, global)</li>
                <li><strong>Helpful Messages:</strong> Specific error text with troubleshooting tips</li>
                <li><strong>Save State:</strong> Track unsaved changes with timestamps</li>
                <li><strong>Actions:</strong> Save, Download, Reset, Show Code buttons</li>
            </ul>

            <h3>Code Editor</h3>
            <p>In-app Monaco-style editor for code artifacts:</p>
            <ul style="margin-left: 20px;">
                <li>Syntax highlighting for TypeScript, C#, Python, Java, etc.</li>
                <li>Multi-file editing for code prototypes</li>
                <li>Save/revert capabilities with confirmation</li>
                <li>File tree navigation</li>
                <li>Search and replace</li>
            </ul>
        </div>

        <!-- Technical Stack -->
        <div class="section">
            <h2>Technical Stack</h2>

            <div class="feature-grid">
                <div class="feature-card">
                    <h3>Frontend</h3>
                    <ul>
                        <li>Streamlit (Python web framework)</li>
                        <li>HTML/CSS/JavaScript for prototypes</li>
                        <li>Mermaid.js for diagrams</li>
                        <li>Monaco Editor integration</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h3>AI & ML</h3>
                    <ul>
                        <li>Ollama (local model serving)</li>
                        <li>Google Gemini 2.0 Flash</li>
                        <li>Groq (fast inference)</li>
                        <li>OpenAI GPT-4</li>
                        <li>HuggingFace Transformers</li>
                        <li>PEFT (LoRA/QLoRA)</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h3>Data & Storage</h3>
                    <ul>
                        <li>ChromaDB (vector database)</li>
                        <li>NetworkX (graph analysis)</li>
                        <li>JSON (file storage)</li>
                        <li>File system (outputs, cache)</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h3>Code Analysis</h3>
                    <ul>
                        <li>AST (Abstract Syntax Trees)</li>
                        <li>Regex parsing</li>
                        <li>Radon (complexity metrics)</li>
                        <li>Static analysis tools</li>
                    </ul>
                </div>
            </div>

            <h3>Key Components (File Structure)</h3>
            <div class="code-block">
architect_ai_cursor_poc/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îî‚îÄ‚îÄ app_v2.py                        # Main Streamlit application
‚îú‚îÄ‚îÄ agents/
‚îÇ   ‚îî‚îÄ‚îÄ universal_agent.py               # Main orchestrator
‚îú‚îÄ‚îÄ ai/
‚îÇ   ‚îú‚îÄ‚îÄ smart_generation.py              # Generation orchestrator
‚îÇ   ‚îú‚îÄ‚îÄ smart_model_selector.py          # Priority-based model selection
‚îÇ   ‚îú‚îÄ‚îÄ model_router.py                  # Local/cloud routing
‚îÇ   ‚îú‚îÄ‚îÄ artifact_router.py               # Artifact-specific models
‚îÇ   ‚îú‚îÄ‚îÄ output_validator.py              # Validation system
‚îÇ   ‚îî‚îÄ‚îÄ ollama_client.py                 # Ollama server interface
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ knowledge_graph.py               # AST parsing + NetworkX
‚îÇ   ‚îú‚îÄ‚îÄ pattern_mining.py                # Design pattern detection
‚îÇ   ‚îú‚îÄ‚îÄ local_finetuning.py             # HuggingFace training
‚îÇ   ‚îú‚îÄ‚îÄ adaptive_learning.py             # Feedback collection
‚îÇ   ‚îú‚îÄ‚îÄ finetuning_dataset_builder.py   # Dataset generation
‚îÇ   ‚îú‚îÄ‚îÄ interactive_prototype_editor.py  # Chat-based editing
‚îÇ   ‚îú‚îÄ‚îÄ mermaid_editor.py                # Diagram editor
‚îÇ   ‚îú‚îÄ‚îÄ code_editor.py                   # Code editing
‚îÇ   ‚îú‚îÄ‚îÄ version_history.py               # Version tracking
‚îÇ   ‚îî‚îÄ‚îÄ enhanced_rag.py                  # Enhanced retrieval
‚îú‚îÄ‚îÄ rag/
‚îÇ   ‚îú‚îÄ‚îÄ ingest.py                        # Indexing
‚îÇ   ‚îú‚îÄ‚îÄ retrieve.py                      # Hybrid search
‚îÇ   ‚îî‚îÄ‚îÄ config.yaml                      # RAG configuration
‚îú‚îÄ‚îÄ validation/
‚îÇ   ‚îî‚îÄ‚îÄ output_validator.py              # Artifact validators
‚îî‚îÄ‚îÄ workers/
    ‚îî‚îÄ‚îÄ finetuning_worker.py             # Background training</div>
        </div>

        <!-- Requirements -->
        <div class="section">
            <h2>System Requirements</h2>

            <h3>Minimum Requirements</h3>
            <table>
                <thead>
                    <tr>
                        <th>Component</th>
                        <th>Requirement</th>
                        <th>Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Python</td>
                        <td>3.9+</td>
                        <td>Required for Streamlit and dependencies</td>
                    </tr>
                    <tr>
                        <td>RAM</td>
                        <td>8GB+</td>
                        <td>16GB recommended for Knowledge Graph on large repos</td>
                    </tr>
                    <tr>
                        <td>VRAM (GPU)</td>
                        <td>12GB</td>
                        <td>For local models (Ollama). Optional if using cloud-only</td>
                    </tr>
                    <tr>
                        <td>Disk Space</td>
                        <td>10GB+</td>
                        <td>5GB for models, 5GB for ChromaDB index</td>
                    </tr>
                    <tr>
                        <td>Ollama</td>
                        <td>Latest</td>
                        <td>Optional for local models, required for fine-tuning</td>
                    </tr>
                </tbody>
            </table>

            <h3>Cloud API Keys (Optional)</h3>
            <p>Configure in config/secrets.yaml:</p>
            <ul style="margin-left: 20px;">
                <li><strong>Gemini API Key:</strong> For complex tasks (architecture, prototypes)</li>
                <li><strong>Groq API Key:</strong> For fast fallback</li>
                <li><strong>OpenAI API Key:</strong> For premium quality</li>
            </ul>

            <div class="info-box note">
                <strong>Cloud-Only Mode:</strong> The application can run without Ollama by relying solely on cloud providers. Local-first mode requires Ollama with models installed.
            </div>
        </div>

        <!-- Quick Start -->
        <div class="section">
            <h2>Quick Start</h2>

            <div class="code-block">
# 1. Install Dependencies
pip install -r requirements.txt

# 2. Install Ollama (optional, for local models)
# Download from: https://ollama.com/download

# 3. Pull Local Models (if using Ollama)
ollama pull llama3:8b-instruct-q4_K_M
ollama pull codellama:7b-instruct-q4_K_M
ollama pull mistral:7b-instruct-q4_K_M
ollama pull qwen2.5-coder:7b-instruct-q4_K_M  # Optional

# 4. Configure API Keys (optional)
# Create config/secrets.yaml with your API keys

# 5. Launch Application
python launch.py
# Opens at: http://localhost:8501

# 6. Index Your Repository (First-Time Setup)
# In sidebar: Click "Index Project Files"
# Wait ~30 seconds for initial indexing

# 7. Upload Meeting Notes
# Create a .md file with requirements (minimum 80 characters)
# Upload via sidebar file uploader

# 8. Generate Artifacts
# Select mode (Developer/PM)
# Click artifact generation buttons
# View results in Outputs tab</div>

            <h3>First-Time Indexing</h3>
            <p>The RAG system needs to index your repository before first use:</p>
            <ol style="margin-left: 20px;">
                <li>Click "Index Project Files" in the sidebar</li>
                <li>System scans your repository for code files</li>
                <li>Excludes tool files (self-contamination prevention)</li>
                <li>Creates ChromaDB vector embeddings</li>
                <li>Builds BM25 index</li>
                <li>Duration: ~30 seconds for medium repos (1000 files)</li>
                <li>Subsequent runs use incremental indexing (only changed files)</li>
            </ol>
        </div>

        <!-- Known Limitations -->
        <div class="section">
            <h2>Known Limitations</h2>

            <div class="info-box warning">
                <strong>Current Limitations:</strong>
            </div>

            <ul style="margin-left: 20px;">
                <li><strong>Ollama Fine-Tuning:</strong> Automatic training trigger works, but actual Ollama fine-tuning requires Ollama's fine-tuning API (not yet publicly available). Training data is collected and ready.</li>
                <li><strong>VRAM Constraints:</strong> Optimized for 12GB GPUs. Larger models require more VRAM or cloud-only mode.</li>
                <li><strong>Language Support:</strong> AST parsing only for Python. Other languages use regex (less accurate).</li>
                <li><strong>Single User:</strong> No authentication system. Designed for single-user development tool.</li>
                <li><strong>Model Context Limits:</strong> Large repositories may exceed model context windows even with RAG optimization.</li>
                <li><strong>Code Execution:</strong> Generated code not executed automatically. Manual review and testing required.</li>
                <li><strong>Mermaid Syntax:</strong> Complex diagrams may exceed Mermaid's capabilities. Falls back to simpler structures.</li>
            </ul>
        </div>

        <!-- Architecture Philosophy -->
        <div class="section">
            <h2>Architecture Philosophy</h2>

            <h3>Design Decisions</h3>

            <div class="feature-card">
                <h4>Local-First with Cloud Fallback</h4>
                <p>Rationale: Balance cost, privacy, and quality. Local models try first (free, private), cloud only when needed (expensive but high-quality).</p>
            </div>

            <div class="feature-card">
                <h4>RAG-First Generation</h4>
                <p>Rationale: Generic AI outputs are useless. Always retrieve repository context first to ensure generated artifacts match actual codebase.</p>
            </div>

            <div class="feature-card">
                <h4>Validation Before Saving</h4>
                <p>Rationale: Prevent low-quality outputs from polluting results. Auto-retry ensures quality threshold met before accepting.</p>
            </div>

            <div class="feature-card">
                <h4>Artifact-Specific Models</h4>
                <p>Rationale: One model can't be optimal for all tasks. Route each artifact type to specialized model trained for that task.</p>
            </div>

            <div class="feature-card">
                <h4>Static Analysis + AI</h4>
                <p>Rationale: AI alone can hallucinate. Combine programmatic analysis (Knowledge Graph, Pattern Mining) with AI for accuracy.</p>
            </div>

            <div class="feature-card">
                <h4>Self-Contamination Prevention</h4>
                <p>Rationale: Tool must never index its own code. 4-layer exclusion system ensures only user code is analyzed.</p>
            </div>
        </div>

        <footer>
            <p><strong>Architect.AI v2.1.0</strong></p>
            <p>Built with Streamlit, Ollama, ChromaDB, NetworkX, HuggingFace</p>
            <p>¬© 2025 | Internal Development Tool</p>
            <p style="margin-top: 15px; opacity: 0.8;">
                Documentation generated: November 2025 | Based on actual codebase analysis
            </p>
        </footer>
    </div>
</body>
</html>
