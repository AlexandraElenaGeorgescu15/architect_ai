# API Documentation

## API Overview

This document provides a comprehensive overview of the available APIs, including the current backend API (C# .NET) and the planned phone API. It details the endpoints, request and response formats, and data transfer objects (DTOs) used.

## Base URL

### Current Backend API (C# .NET):

`https://localhost:7214`

### Planned Phone API:

`https://localhost:7214/api`

## Authentication

User authentication is handled through the `/Users/login` endpoint. Successful authentication returns user data. Unsuccessful authentication results in a 404 error.

## Endpoints

### Current Backend API (C# .NET)

#### Users Controller (`/Users`)

-   `POST /Users/register` - User registration
    -   Description: Registers a new user.
    -   Request Body: `UserDto` (username, email, `***REDACTED***`)
    -   Response:
        -   200 OK: Registration successful.
        -   400 BadRequest: Registration failed due to validation errors.

-   `POST /Users/login` - User authentication
    -   Description: Authenticates a user.
    -   Request Body: `UserDto` (username/email, `***REDACTED***`)
    -   Response:
        -   200 OK: Authentication successful with user data.
        -   404 NotFound: Authentication failed, user not found.

#### Weather Controller (`/WeatherForecast`)

-   `GET /WeatherForecast` - Sample weather data (demo endpoint)
    -   Description: Retrieves sample weather forecast data.
    -   Request: None
    -   Response: 200 OK with weather data.

### Planned Phone API (to be implemented)

#### Phone Endpoints

-   `GET /api/phones?brand=&q=&priceMin=&priceMax=`
    -   Description: Retrieves a list of phones based on query parameters.
    -   Request Parameters:
        -   `brand` (string, optional): Filter by phone brand.
        -   `q` (string, optional): Search query.
        -   `priceMin` (number, optional): Minimum price.
        -   `priceMax` (number, optional): Maximum price.
    -   Response: `Phone[]`

-   `POST /api/phones`
    -   Description: Creates a new phone.
    -   Request Body: `Phone`
    -   Response: `Phone` (newly created phone)

-   `DELETE /api/phones/{id}`
    -   Description: Deletes a phone by ID.
    -   Request Parameters:
        -   `id` (string, required): Phone ID.
    -   Response: 204 No Content

-   `PUT /api/phones/{id}/primary`
    -   Description: Sets a phone as the primary phone.
    -   Request Parameters:
        -   `id` (string, required): Phone ID.
    -   Response: `Phone` (updated phone)

## DTOs

### UserDto (C#)

```csharp
{
  "username": string,
  "email": string,
  "***REDACTED***": string
}
```

### Phone (TypeScript)

```typescript
{
  id: string;
  userId: string;
  brand: 'Apple'|'Samsung'|'Google'|'Xiaomi'|'OnePlus'|'Other';
  model: string;
  numberE164: string;   // +14155551212
  display: string;      // +1 415 555 1212 (formatted)
  price: number;        // 0..2000
  currency: 'USD';
  isPrimary: boolean;
  createdAt: string;    // ISO
  updatedAt: string;    // ISO
}
```

## Error Codes

| HTTP Status Code | Description                                          |
| ---------------- | ---------------------------------------------------- |
| 200 OK           | Request was successful.                             |
| 204 No Content   | Request was successful, but no content to return.  |
| 400 Bad Request  | Request could not be understood due to malformed syntax or invalid data. |
| 404 Not Found    | Resource not found.                                |
| 500 Internal Server Error | An unexpected error occurred on the server. |

## Rate Limiting

*Details on rate limiting are currently not available. Please check back for updates.*

## Frontend Services

-   **AuthenticationService**: `/Users/login`, `/Users/register`
-   **PhoneService**: Currently mock data, will connect to planned phone API
